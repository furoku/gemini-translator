# Gemini Translator

X.com（Twitter）で外国語テキストを自動翻訳するChrome拡張機能。

## 機能

- Gemini APIを使用したリアルタイム翻訳
- 英語→日本語 / 日本語→英語の切り替え
- 原文⇄翻訳のワンクリック切り替え
- 日次コスト上限設定
- 用語集（グロッサリー）対応
- サイト別の翻訳ルール設定

## インストール

### リリースからダウンロード（推奨）

1. [Releases](https://github.com/furoku/gemini-translator/releases/latest) から最新のzipをダウンロード
2. 解凍して `extension/` フォルダを取り出す
3. Chromeで `chrome://extensions` を開く
4. 右上の「デベロッパーモード」を有効化
5. 「パッケージ化されていない拡張機能を読み込む」をクリック
6. `extension/` フォルダを選択

### ソースからインストール

```bash
git clone https://github.com/furoku/gemini-translator.git
```

その後、上記の手順3〜6を実行。

## APIキーの取得

1. [Google AI Studio](https://aistudio.google.com/apikey) にアクセス
2. 「APIキーを作成」をクリック
3. 生成されたキーをコピー
4. 拡張機能の設定画面でキーを入力

## 使い方

1. X.com / Twitter を開く
2. 拡張機能アイコンをクリックして設定を確認
3. 自動翻訳がオンなら、外国語ツイートが自動で翻訳される
4. 翻訳テキストをクリックすると原文に戻せる

---

## 設定ガイド

### 基本設定

| 項目 | 説明 |
|------|------|
| モデル | 使用するGeminiモデル（デフォルト: gemini-2.0-flash-lite） |
| 翻訳方向 | 英語→日本語 または 日本語→英語 |
| 自動翻訳 | ON/OFF |

---

### 除外キーワード

特定のアカウントやキーワードを含むツイートを翻訳対象から外せます。

**設定場所**: 拡張機能アイコン → ⚙️ 詳細設定 → 「除外キーワード」

**使い方**:
- 1行に1つずつキーワードを入力
- 大文字・小文字は区別しない
- ツイート本文またはユーザー名に含まれていれば除外

**設定例**:
```
@official_jp       ← 日本語公式アカウントを除外
広告
Promoted           ← 広告ツイートを除外
bot
```

**こんなときに便利**:
- 日本語アカウントなのに英語判定されてしまう
- 広告やbotの翻訳が不要
- 特定の話題を翻訳したくない

---

### コスト上限

API利用料金が心配なときのための安全装置です。上限に達すると、その日は翻訳が停止します（毎朝4時にリセット）。

**設定場所**: 拡張機能アイコン → ⚙️ 詳細設定 → 「日次制限」

**2つの制限方法**:

| 制限タイプ | 説明 | おすすめ設定 |
|------------|------|--------------|
| **コスト上限** | 1日あたりの金額（USD） | 0.10〜0.50 USD |
| **文字数上限** | 1日あたりの翻訳文字数 | 50,000〜200,000文字 |

**料金の目安（gemini-2.0-flash-lite）**:
- 10万文字の翻訳 ≈ 約0.01〜0.02 USD
- 普通に使う分には月数十円程度

**現在の利用状況の確認**:
- 拡張機能アイコンをクリック → 「本日の利用状況」で確認可能
- モデル別の文字数・コストが表示される

**上限に達したら**:
- 「本日の上限に達しました」とトースト表示
- 翌朝4時に自動リセット
- 緊急時は詳細設定から上限を引き上げ可能

---

### サイト設定（ホワイトリスト）

デフォルトはX.com（Twitter）のみ対応。他のサイトでも使いたい場合に設定します。

**設定場所**: 拡張機能アイコン → ⚙️ 詳細設定 → 「対象サイト」

**追加手順**:

1. **ホスト名を追加**: 翻訳したいサイトのドメインを入力
   ```
   例: reddit.com, news.ycombinator.com
   ```

2. **権限を許可**: 追加後、Chromeが権限許可を求めるので「許可」をクリック

3. **（任意）翻訳ルールを設定**: サイトによってはテキスト検出がうまくいかない場合があります。その場合は「サイト別ルール」でCSSセレクタを指定できます。

**サイト別ルールの例**:
```json
{
  "reddit.com": {
    "selector": "[data-testid='post-content'] p",
    "minLength": 20
  }
}
```

**注意点**:
- サイトによっては構造が複雑で翻訳できない場合があります
- X.com以外は実験的機能です

---

### 用語集（グロッサリー）

固有名詞や専門用語を希望通りに翻訳させるための辞書機能です。

**設定場所**: 拡張機能アイコン → ⚙️ 詳細設定 → 「用語集」

**使い方**:
| 原語 | 訳語 |
|------|------|
| Claude | クロード |
| Anthropic | Anthropic（そのまま） |
| tweet | ツイート |

**こんなときに便利**:
- 人名・サービス名を統一したい
- 業界用語を正しく訳したい
- 「post」を「投稿」ではなく「ポスト」にしたい

---

## トラブルシューティング

| 症状 | 対処法 |
|------|--------|
| 翻訳されない | APIキーが正しいか確認。詳細設定の「接続テスト」を実行 |
| 日本語が翻訳される | 翻訳方向を「英語→日本語」に変更 |
| 特定アカウントだけ翻訳したくない | 除外キーワードにアカウント名を追加 |
| 料金が心配 | 日次コスト上限を0.10 USDなど低めに設定 |
| X.com以外で使いたい | サイトホワイトリストにドメインを追加 |

---

## コントリビューション / セキュリティ

- コントリビューション: `CONTRIBUTING.md`
- 行動規範: `CODE_OF_CONDUCT.md`
- セキュリティ報告: `SECURITY.md`
- プライバシーポリシー: `PRIVACY.md`

## ライセンス

MIT License
